<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Resume Input</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='template1/style.css') }}">
    <style>
        body {
            font-family: 'Segoe UI', sans-serif;
            background-color: #f2f4f8;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
        }

        form {
            background-color: #fff;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
            width: 100%;
            max-width: 600px;
            font-size: 18px;
        }

        form label {
            display: block;
            margin-bottom: 5px;
            font-weight: 600;
        }

        form input,
        form textarea {
            width: 100%;
            padding: 10px;
            margin-bottom: 20px;
            border: 1px solid #ccc;
            border-radius: 5px;
            font-size: 16px;
        }

        form button {
            background-color: #4a90e2;
            color: white;
            padding: 12px 20px;
            border: none;
            border-radius: 6px;
            font-size: 18px;
            cursor: pointer;
        }

        form button:hover {
            background-color: #357ab8;
        }

        /* Skill Selector Styling */
        .skills-container {
            border: 1px solid #ccc;
            border-radius: 5px;
            padding: 8px;
            min-height: 50px;
            position: relative;
            margin-bottom: 20px;
            
        }

        #skills-list {
            display: flex;
            flex-wrap: wrap;
            gap: 6px;
            margin-bottom: 5px;
            
        }

        .skill-chip {
            background-color: #e0e0e0;
            border-radius: 20px;
            padding: 6px 12px;
            font-size: 14px;
            display: flex;
            align-items: center;
        }

        .skill-chip span {
            margin-left: 8px;
            cursor: pointer;
            font-weight: bold;
            color: red;
        }
        #suggestions {
            list-style: none;
            margin: 0;
            padding: 0;
            border: 1px solid #ccc;
            position: absolute;
            background-color: white;
            width: 100%;
            z-index: 10;
            max-height: 150px;
            overflow-y: auto;
            display: none;
        }

        #suggestions li {
            padding: 8px;
            cursor: pointer;
        }

        #suggestions li:hover {
            background-color: #f0f0f0;
        }
   /* 1. Make skill input fit container */
.skills-container input {
  width: 100%;
  box-sizing: border-box;
  margin: 0; /* remove extra space */
}

/* 2. Align add/delete buttons with input */
.line-input {
  display: flex;
  align-items: center; /* vertically center input + buttons */
  gap: 6px;
}

.line-input input {
  flex: 1;
}

.add-btn,
.delete-btn {
  padding: 6px 10px;
  height: auto;
  line-height: 1;   /* normalize vertical alignment */
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 14px;
  cursor: pointer;
}


    </style>
</head>
<body>
    <form method="POST" action="/preview/template1" enctype="multipart/form-data">
        <h2>Enter Resume Details</h2>

        <label>Name:</label>
        <input type="text" name="name">

        <label>Title:</label>
        <input type="text" name="title">

        <label for="photo">Upload Profile Photo:</label>
        <input type="file" name="photo" accept="image/*">

        <label>About Me:</label>
        <textarea name="about" rows="3"></textarea>

        <label>Skills:</label>
        <div class="skills-container">
            <div id="skills-list"></div>
            <input type="text" id="skill-input" placeholder="Start typing a skill..." autocomplete="off">
            <ul id="suggestions"></ul>
            <!-- Hidden input to store selected skills as comma-separated -->
            <input type="hidden" name="skills" id="skills-hidden">
        </div>

        <label>Certifications:</label>
    <div id="certs-container">
       <div class="line-input">
            <input type="text" name="certs[]" placeholder="Add 1st certificate">
            <button type="button" class="add-btn">➕</button>
       </div>
    </div>

        <label>Experience:</label>
        <textarea name="experience" rows="2"></textarea>

        <label>Education:</label>
<div id="edu-container">
  <div class="line-input">
    <input type="text" name="education[]" placeholder="Add 1st education">
    <button type="button" class="add-btn">➕</button>
  </div>
</div>

        <label>Phone Number:</label>
        <input type="text" name="phone">

        <label>Email:</label>
        <input type="email" name="email">

        <label>Location:</label>
        <input type="text" name="location">

        <button type="submit">Generate Resume</button>
    </form>

    <script>
        const predefinedSkills = [
            "HTML", "CSS", "JavaScript", "Python", "C++", "C#", "Java", "SQL",
            "Node.js", "React", "Vue.js", "Django", "Flask", "AWS", "Firebase",
            "MongoDB", "Express", "Git", "REST APIs", "UI/UX", "Docker", "Kubernetes","TypeScript", "Go", "Ruby", "Swift", "Kotlin", "PostgreSQL", "MySQL", "Oracle", 
  "DynamoDB", "Angular", ".NET", "Spring Boot", "PHP", "Scala", "TensorFlow", 
  "PyTorch", "Scikit-learn", "Keras", "Pandas", "NumPy", "R", "Hadoop", "Spark", 
  "Power BI", "Tableau", "Linux", "Jenkins", "Terraform", "CI/CD", 
  "Agile", "Scrum", "Kanban", "Business Analysis", "Project Management", 
  "Risk Management", "SAP", "Change Management", "Business Intelligence", 
  "Stakeholder Engagement", "Ethical Hacking", "Threat Modeling", 
  "Vulnerability Assessment", "Penetration Testing", "SIEM", 
  "Network Security", "Cloud Security", "GDPR", "HIPAA", 
  "Problem Solving", "Communication", "Leadership", "Team Collaboration", 
  "Adaptability", "Time Management", "Critical Thinking", 
  "Innovation", "Conflict Resolution", "JIRA", "Confluence", "GitHub", 
  "Salesforce", "ServiceNow", "Figma", "Selenium", "Jest", "Mocha", 
  "JUnit", "Postman","Programming C","Flutter and Dart","DSA","Powerpoit",
  "Microsoft Excel","Marketting","Sales"
        ];

        const input = document.getElementById('skill-input');
        const suggestions = document.getElementById('suggestions');
        const skillList = document.getElementById('skills-list');
        const hiddenInput = document.getElementById('skills-hidden');

        let selectedSkills = [];

        input.addEventListener('input', () => {
            const text = input.value.toLowerCase();
            suggestions.innerHTML = '';
            if (text) {
                const filtered = predefinedSkills.filter(skill =>
                    skill.toLowerCase().startsWith(text) && !selectedSkills.includes(skill)
                );
                filtered.forEach(skill => {
                    const li = document.createElement('li');
                    li.textContent = skill;
                    li.onclick = () => addSkill(skill);
                    suggestions.appendChild(li);
                });
                suggestions.style.display = 'block';
            } else {
                suggestions.style.display = 'none';
            }
        });

        function addSkill(skill) {
            if (!selectedSkills.includes(skill)) {
                selectedSkills.push(skill);

                const chip = document.createElement('div');
                chip.className = 'skill-chip';
                chip.textContent = skill;

                const close = document.createElement('span');
                close.textContent = '×';
                close.onclick = () => removeSkill(skill, chip);
                chip.appendChild(close);

                skillList.appendChild(chip);
                updateHiddenInput();
            }

            input.value = '';
            suggestions.innerHTML = '';
            suggestions.style.display = 'none';
        }

        function removeSkill(skill, chipElement) {
            selectedSkills = selectedSkills.filter(s => s !== skill);
            chipElement.remove();
            updateHiddenInput();
        }

        function updateHiddenInput() {
            hiddenInput.value = selectedSkills.join(',');
        }

       function setupLineMechanism(containerId, baseText) {
  const container = document.getElementById(containerId);

  container.addEventListener("click", function(e) {
    if (e.target.classList.contains("add-btn")) {
      e.preventDefault();

      const inputs = container.querySelectorAll("input");
      const newIndex = inputs.length + 1;

      const lineDiv = document.createElement("div");
      lineDiv.className = "line-input";

      const newInput = document.createElement("input");
      newInput.type = "text";
      newInput.name = containerId === "certs-container" ? "certs[]" : "education[]";
      newInput.placeholder = `Add ${newIndex} ${baseText}`;

      // Delete button
      const delBtn = document.createElement("button");
      delBtn.type = "button";
      delBtn.className = "delete-btn";
      delBtn.textContent = "✖";
      delBtn.onclick = () => lineDiv.remove();

      // Add button
      const addBtn = document.createElement("button");
      addBtn.type = "button";
      addBtn.className = "add-btn";
      addBtn.textContent = "➕";

      lineDiv.appendChild(newInput);
      lineDiv.appendChild(delBtn);
      lineDiv.appendChild(addBtn);

      container.appendChild(lineDiv);
      newInput.focus();
    }
  });
}

// Activate for both
setupLineMechanism("certs-container", "certificate");
setupLineMechanism("edu-container", "education");

function deleteLine(btn) {
  btn.parentElement.remove();
}

    </script>
</body>
</html>
