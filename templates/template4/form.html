<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Resume Form - Template 4</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='template4/style.css') }}">
  <style>
    body {
      font-family: 'Poppins', sans-serif;
      margin: 20px;
      background: #f5f5f5;
    }
    form {
      background: #fff;
      padding: 20px;
      border-radius: 10px;
      max-width: 900px;
      margin: auto;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    }
    h2 {
      margin-top: 20px;
      color: #6b1d32;
    }
    .form-group {
      margin-bottom: 15px;
    }
    label {
      font-weight: 600;
      display: block;
      margin-bottom: 6px;
    }
    input, textarea, select {
      width: 100%;
      padding: 8px;
      border-radius: 5px;
      border: 1px solid #ccc;
    }
    textarea {
      height: 100px;
    }
    .multi-input {
      display: flex;
      margin-bottom: 8px;
    }
    .multi-input input {
      flex: 1;
    }
    .multi-input button {
      margin-left: 5px;
    }
    .tag-container {
      display: flex;
      flex-wrap: wrap;
      border: 1px solid #ccc;
      padding: 5px;
      border-radius: 5px;
      min-height: 40px;
    }
    .tag {
      background: #6b1d32;
      color: white;
      padding: 5px 10px;
      border-radius: 15px;
      margin: 3px;
      display: flex;
      align-items: center;
    }
    .tag span {
      margin-left: 8px;
      cursor: pointer;
    }
    .suggestions {
      border: 1px solid #ccc;
      background: white;
      position: absolute;
      z-index: 1000;
      max-height: 150px;
      overflow-y: auto;
      width: 90%;
    }
    .suggestion {
      padding: 5px;
      cursor: pointer;
    }
    .suggestion:hover {
      background: #eee;
    }
  </style>
</head>
<body>
  <form method="POST" enctype="multipart/form-data" action="{{ url_for('template4_form') }}">

    <h2>Basic Info</h2>
    <div class="form-group">
      <label>Name</label>
      <input type="text" name="name" required>
    </div>
    <div class="form-group">
      <label>Title</label>
      <input type="text" name="title" required>
    </div>
    <div class="form-group">
      <label>Profile Photo</label>
      <input type="file" name="profile_image" accept="image/*">

    </div>

    <h2>My Contact</h2>
    <div class="form-group">
      <label>Email</label>
      <input type="email" name="email" required>
    </div>
    <div class="form-group">
      <label>Phone</label>
      <input type="text" name="phone" required>
    </div>
    <div class="form-group">
      <label>Location</label>
      <input type="text" name="location" required>
    </div>
    <div class="form-group">
      <label>Website</label>
      <input type="url" name="website">
    </div>

    <h2>Hard Skills</h2>
    <div id="hard-skills">
      <div class="multi-input">
        <input type="text" name="hard_skills[]" required>
        <button type="button" onclick="this.parentElement.remove()">x</button>
      </div>
    </div>
    <button type="button" onclick="addField('hard-skills','hard_skills[]')">+ Add Skill</button>

    <h2>Soft Skills</h2>
    <div class="form-group" style="position: relative;">
      <input type="text" id="soft-skill-input" placeholder="Type a skill...">
      <div class="suggestions" id="soft-skill-suggestions" style="display: none;"></div>
      <div class="tag-container" id="soft-skill-container"></div>
      <input type="hidden" name="soft_skills" id="soft-skills-hidden">
    </div>

    <h2>Education Background</h2>
    <div id="education">
      <div class="multi-input">
        <input type="text" name="education[]" required>
        <button type="button" onclick="this.parentElement.remove()">x</button>
      </div>
    </div>
    <button type="button" onclick="addField('education','education[]')">+ Add Education</button>

    <h2>About Me</h2>
    <textarea name="about" required></textarea>

    <h2>Professional Experience</h2>
    <div id="experience">
      <!-- Default 1st experience -->
      <div class="experience-block">
        <div class="form-group"><label>Company</label><input type="text" name="company[]" required></div>
        <div class="form-group"><label>Job Title</label><input type="text" name="job_title[]" required></div>
        <div class="form-group"><label>Start Date</label><input type="text" name="start_date[]" required></div>
        <div class="form-group"><label>End Date</label><input type="text" name="end_date[]" required></div>

        <label>Key Responsibilities</label>
<div id="resp-0">
  <div class="multi-input">
    <input type="text" name="responsibilities[0][]" required>
    <button type="button" onclick="this.parentElement.remove()">x</button>
  </div>
</div>
<button type="button" onclick="addField('resp-0','responsibilities[0][]')">+ Add Responsibility</button>
<hr>

      </div>
    </div>
    <button type="button" onclick="addExperience()">+ Add Experience</button>

    <h2>Achievements</h2>
    <div id="achievements">
      <!-- Default 1st achievement -->
      <div class="multi-input">
        <input type="text" name="achievement_date[]" placeholder="Date" required>
        <input type="text" name="achievement_desc[]" placeholder="Description" required>
        <button type="button" onclick="this.parentElement.remove()">x</button>
      </div>
    </div>
    <button type="button" onclick="addAchievement()">+ Add Achievement</button>

    <br><br>
    <button type="submit">Preview Resume</button>
  </form>

  <script>
    // Function for addable input fields
    function addField(containerId, name) {
      const container = document.getElementById(containerId);
      const div = document.createElement("div");
      div.classList.add("multi-input");
      div.innerHTML = `<input type="text" name="${name}" required>
                       <button type="button" onclick="this.parentElement.remove()">x</button>`;
      container.appendChild(div);
    }

    // Soft skills with autocomplete
    const softSkillInput = document.getElementById("soft-skill-input");
    const softSkillContainer = document.getElementById("soft-skill-container");
    const softSkillsHidden = document.getElementById("soft-skills-hidden");
    const suggestionsBox = document.getElementById("soft-skill-suggestions");
    let softSkills = [];
    const softSkillSuggestions = ["Observation","Decision making","Communication","Multi-tasking","Leadership","Teamwork","Problem solving","Adaptability","Creativity","Time management"];

    softSkillInput.addEventListener("input", function() {
      const query = softSkillInput.value.toLowerCase();
      suggestionsBox.innerHTML = "";
      if (query) {
        const matches = softSkillSuggestions.filter(s => s.toLowerCase().includes(query) && !softSkills.includes(s));
        if (matches.length > 0) {
          matches.forEach(skill => {
            const div = document.createElement("div");
            div.classList.add("suggestion");
            div.textContent = skill;
            div.onclick = () => {
              softSkills.push(skill);
              renderSoftSkills();
              softSkillInput.value = "";
              suggestionsBox.style.display = "none";
            };
            suggestionsBox.appendChild(div);
          });
          suggestionsBox.style.display = "block";
        } else {
          suggestionsBox.style.display = "none";
        }
      } else {
        suggestionsBox.style.display = "none";
      }
    });

    function renderSoftSkills() {
      softSkillContainer.innerHTML = "";
      softSkills.forEach(skill => {
        const tag = document.createElement("div");
        tag.classList.add("tag");
        tag.innerHTML = `${skill} <span onclick="removeSoftSkill('${skill}')">&times;</span>`;
        softSkillContainer.appendChild(tag);
      });
      softSkillsHidden.value = JSON.stringify(softSkills);
    }

    function removeSoftSkill(skill) {
      softSkills = softSkills.filter(s => s !== skill);
      renderSoftSkills();
    }

    // Professional Experience (extra ones)
    // Professional Experience (extra ones)
function addExperience() {
  const container = document.getElementById("experience");
  if (container.children.length >= 4) return; // now allows 4 sections total

  const index = container.children.length;
  const div = document.createElement("div");
  div.classList.add("experience-block");
  div.innerHTML = `
    <div class="form-group"><label>Company</label><input type="text" name="company[]" required></div>
    <div class="form-group"><label>Job Title</label><input type="text" name="job_title[]" required></div>
    <div class="form-group"><label>Start Date</label><input type="text" name="start_date[]" required></div>
    <div class="form-group"><label>End Date</label><input type="text" name="end_date[]" required></div>

    <label>Key Responsibilities</label>
    <div id="resp-${index}">
      <div class="multi-input">
        <input type="text" name="responsibilities[${index}][]" required>
        <button type="button" onclick="this.parentElement.remove()">x</button>
      </div>
    </div>
    <button type="button" onclick="addField('resp-${index}','responsibilities[${index}][]')">+ Add Responsibility</button>
    <hr>
  `;
  container.appendChild(div);
}


    // Achievements (extra)
    function addAchievement() {
      const container = document.getElementById("achievements");
      const div = document.createElement("div");
      div.classList.add("multi-input");
      div.innerHTML = `
        <input type="text" name="achievement_date[]" placeholder="Date" required>
        <input type="text" name="achievement_desc[]" placeholder="Description" required>
        <button type="button" onclick="this.parentElement.remove()">x</button>
      `;
      container.appendChild(div);
    }
  </script>
</body>
</html>
